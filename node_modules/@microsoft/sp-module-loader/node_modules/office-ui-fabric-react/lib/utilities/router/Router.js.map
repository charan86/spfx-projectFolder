{"version":3,"sources":["utilities/router/Router.tsx"],"names":[],"mappings":"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","file":"utilities/router/Router.js","sourcesContent":["import * as React from 'react';\nimport { EventGroup } from '../eventGroup/EventGroup';\n\nexport interface IRouterProps {\n  replaceState?: boolean;\n  children?: React.ReactElement<any>[];\n  onNewRouteLoaded?: () => void;\n}\n\nexport interface IRouterState {\n  path: string;\n}\n\nexport class Router extends React.Component<IRouterProps, IRouterState> {\n  private _events: EventGroup;\n\n  constructor() {\n    super();\n\n    this.state = {\n      path: location.hash\n    };\n    this._events = new EventGroup(this);\n  }\n\n  public componentDidUpdate(prevProps: IRouterProps, prevState: IRouterState) {\n\n    if (this.state.path !== prevState.path) {\n      window.scrollTo(0, 0);\n    }\n  }\n\n  public render() {\n    return _getComponent(this.state.path, this.props.children);\n  }\n\n  public componentDidMount() {\n    this._events.on(window, 'hashchange', () => {\n      if (this.state.path !== location.hash) {\n        this.setState({ path: location.hash }, () => {\n          if (this.props.onNewRouteLoaded) {\n            this.props.onNewRouteLoaded();\n          }\n        });\n      }\n    });\n\n    if (this.props.onNewRouteLoaded) {\n      this.props.onNewRouteLoaded();\n    }\n  }\n\n  public componentWillUnmount() {\n    this._events.dispose();\n  }\n}\n\nfunction _getComponent(matchPath, children) {\n  let path = matchPath;\n  if (children && children.$$typeof) {\n    children = [ children ];\n  }\n\n  // Check if an in page anchor link was passed to the Url #/example/route#inPageAnchorLink\n  if (_hasAnchorLink(path)) {\n    // Extract the base path #/example/route - #inPageAnchorLink\n    path = _extractRoute(path);\n  }\n\n  for (let i = 0; children && i < children.length; i++) {\n    let currentChild = children[i];\n\n    if (_match(path, currentChild)) {\n      let component = currentChild.props.component;\n      let childComponent = _getComponent(path, currentChild.props.children);\n\n      return React.createElement(component, null, childComponent);\n    }\n  }\n  return null;\n}\n\nfunction _hasAnchorLink(path) {\n  return (path.match(/#/g) || []).length > 1;\n}\n\n/*\n  Extract the route from the URL minus the in page anchor link\n  Example URL #/example/route#inPageAnchorLink\n  Returns #/example/route\n*/\nfunction _extractRoute(path) {\n  let index = path.lastIndexOf('#');\n  if (index >= 0) {\n    path = path.substr(0, index);\n  }\n  return path;\n}\n\nfunction _match(currentPath, child): boolean {\n  if (child.props) {\n    let { path } = child.props;\n\n    path = path || '';\n    currentPath = currentPath || '';\n\n    return (\n      (!path) ||\n      (path.toLowerCase() === currentPath.toLowerCase())\n    );\n  }\n\n  return false;\n}\n"],"sourceRoot":"/src"}