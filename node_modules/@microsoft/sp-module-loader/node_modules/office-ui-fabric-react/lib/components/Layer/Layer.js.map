{"version":3,"sources":["components/Layer/Layer.tsx"],"names":[],"mappings":";;;;;;AAAA,IAAY,KAAK,WAAM,OAAO,CAAC,CAAA;AAC/B,IAAY,QAAQ,WAAM,WAAW,CAAC,CAAA;AAEtC,0BAA0B,aAAa,CAAC,CAAA;AAExC,0BAAqC,iBAAiB,CAAC,CAAA;AACvD,QAAO,cAAc,CAAC,CAAA;AAEtB,IAAI,YAAuB,CAAC;AAE5B;IAA2B,yBAA8B;IAcvD,eAAY,KAAmB;QAC7B,kBAAM,KAAK,CAAC,CAAC;QAEb,IAAI,CAAC,GAAG,GAAG,iBAAK,EAAE,CAAC;IACrB,CAAC;IAEM,iCAAiB,GAAxB;QAAA,iBAYC;QAXC,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,oBAAoB,EAAE,CAAC;QAEjE,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAE5B,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,EAAE,UAAC,cAAc;YACzE,KAAI,CAAC,eAAe,GAAG,cAAc,CAAC;YAEtC,EAAE,CAAC,CAAC,KAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC9B,KAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;YAC9B,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,oCAAoB,GAA3B;QACE,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACxC,CAAC;IAEM,yCAAyB,GAAhC,UAAiC,QAAqB;QACpD,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QAC9C,CAAC;IACH,CAAC;IAEM,2BAAW,GAAlB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;QACrC,CAAC;IACH,CAAC;IAEM,sBAAM,GAAb;QACE,MAAM,CAAC,CACL,qBAAC,IAAI,IACH,SAAS,EAAC,UAAU,EACpB,GAAG,EAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAG,EACtC,CACL,CAAC;IACJ,CAAC;IAxDa,kBAAY,GAAG;QAC3B,SAAS,EAAE,KAAK,CAAC,SAAS,CAAC,MAAM;KAClC,CAAC;IAuDJ,YAAC;AAAD,CA1DA,AA0DC,CA1D0B,yBAAa,GA0DvC;AA1DY,aAAK,QA0DjB,CAAA;AAED;IACE,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;QAClB,IAAI,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAEhD,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QACvC,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC,oBAAC,qBAAS,OAAG,EAAE,WAAW,CAAQ,CAAC;IACpE,CAAC;IAED,MAAM,CAAC,YAAY,CAAC;AACtB,CAAC","file":"components/Layer/Layer.js","sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { ILayerProps } from './Layer.Props';\nimport { LayerHost } from './LayerHost';\nimport { ProjectedLayer } from './ProjectedLayer';\nimport { BaseComponent, getId } from '../../Utilities';\nimport './Layer.scss';\n\nlet _defaultHost: LayerHost;\n\nexport class Layer extends BaseComponent<ILayerProps, {}> {\n  public static contextTypes = {\n    layerHost: React.PropTypes.object\n  };\n\n  public context: {\n    layerHost: LayerHost;\n  };\n\n  private _rootElement: HTMLElement;\n  private _projectedLayer: ProjectedLayer;\n  private _layerHost: LayerHost;\n  private _id: string;\n\n  constructor(props?: ILayerProps) {\n    super(props);\n\n    this._id = getId();\n  }\n\n  public componentDidMount() {\n    let layerHost = this.context.layerHost || _getDefaultLayerHost();\n\n    this._layerHost = layerHost;\n\n    layerHost.addLayer(this._id, this._rootElement, this.props, (projectedLayer) => {\n      this._projectedLayer = projectedLayer;\n\n      if (this.props.onLayerMounted) {\n        this.props.onLayerMounted();\n      }\n    });\n  }\n\n  public componentWillUnmount() {\n    this._layerHost.removeLayer(this._id);\n  }\n\n  public componentWillReceiveProps(newProps: ILayerProps) {\n    if (this._projectedLayer) {\n      this._projectedLayer.projectProps(newProps);\n    }\n  }\n\n  public forceUpdate() {\n    if (this._projectedLayer) {\n      this._projectedLayer.forceUpdate();\n    }\n  }\n\n  public render() {\n    return (\n      <span\n        className='ms-Layer'\n        ref={ this._resolveRef('_rootElement') }\n        />\n    );\n  }\n}\n\nfunction _getDefaultLayerHost() {\n  if (!_defaultHost) {\n    let hostElement = document.createElement('div');\n\n    document.body.appendChild(hostElement);\n    _defaultHost = ReactDOM.render(<LayerHost />, hostElement) as any;\n  }\n\n  return _defaultHost;\n}\n"],"sourceRoot":"/src"}