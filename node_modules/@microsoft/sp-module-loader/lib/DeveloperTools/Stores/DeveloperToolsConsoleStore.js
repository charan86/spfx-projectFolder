/**
 * @file DeveloperToolsConsoleStore.ts
 * @Copyright (c) Microsoft Corporation.  All rights reserved.
 */
"use strict";
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var BaseStore_1 = require('./BaseStore');
var DeveloperConsoleResizeAction_1 = require('./../Actions/DeveloperConsoleResizeAction');
var DeveloperConsoleShowHideAction_1 = require('./../Actions/DeveloperConsoleShowHideAction');
var RegisterTabAction_1 = require('./../Actions/RegisterTabAction');
var ManifestManager_1 = require('./../Components/DeveloperModules/ManifestManager/ManifestManager');
var DeveloperToolsTab_1 = require('./../Models/DeveloperToolsTab');
var ManifestManager_resx_1 = require('./../Components/DeveloperModules/ManifestManager/ManifestManager.resx');
var DEFAULT_HEIGHT = 1 / 4;
var MIN_HEIGHT = 1 / 6;
var MAX_HEIGHT = 3 / 4;
var DeveloperToolsConsoleStore = (function (_super) {
    __extends(DeveloperToolsConsoleStore, _super);
    function DeveloperToolsConsoleStore() {
        _super.call(this);
        this.addProcessActionCallback(this.processAction);
        this._height = DEFAULT_HEIGHT;
        this._visible = false;
        this._selectedTabId = 0;
        this._tabs = [new DeveloperToolsTab_1.default({
                title: ManifestManager_resx_1.default.tabTitle,
                component: ManifestManager_1.default
            })];
    }
    Object.defineProperty(DeveloperToolsConsoleStore, "instance", {
        get: function () {
            if (!this._instance) {
                this._instance = new DeveloperToolsConsoleStore();
            }
            return this._instance;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DeveloperToolsConsoleStore.prototype, "height", {
        get: function () {
            return this._height;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DeveloperToolsConsoleStore.prototype, "visible", {
        get: function () {
            return this._visible;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DeveloperToolsConsoleStore.prototype, "selectedTabId", {
        get: function () {
            return this._selectedTabId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DeveloperToolsConsoleStore.prototype, "tabs", {
        get: function () {
            return this._tabs;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Processes the action fired
     */
    DeveloperToolsConsoleStore.prototype.processAction = function (action) {
        if (action instanceof DeveloperConsoleResizeAction_1.default) {
            if (action.height >= MAX_HEIGHT) {
                this._height = MAX_HEIGHT;
            }
            else if (action.height <= MIN_HEIGHT) {
                this._height = MIN_HEIGHT;
            }
            else {
                this._height = action.height;
            }
            this.emitChange();
        }
        else if (action instanceof DeveloperConsoleShowHideAction_1.default) {
            this._visible = action.show;
            this.emitChange();
        }
        else if (action instanceof RegisterTabAction_1.default) {
            this._tabs.push(action.tab);
            if (this._tabs.length === 1) {
                this._selectedTabId = 0;
            }
            this.emitChange();
        }
    };
    return DeveloperToolsConsoleStore;
}(BaseStore_1.default));
exports.DeveloperToolsConsoleStore = DeveloperToolsConsoleStore;
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = DeveloperToolsConsoleStore.instance;

//# sourceMappingURL=DeveloperToolsConsoleStore.js.map
