{"version":3,"sources":["sudoSync.js"],"names":["Object","defineProperty","exports","value","sudo","require","deasync","runSudoSync","params","sudoResult","cachePassword","prompt","stderr","on","data","push","toString","stdout","code","exitCode","undefined","sleep"],"mappings":"AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA;AACA,MAAMC,yDAAOC,QAAQ,MAAR,CAAP,CAAN;AACA;AACA,MAAMC,4DAAUD,QAAQ,SAAR,CAAV,CAAN;AACA,SAASE,WAAT,CAAqBC,MAArB,EAA6B;AAAA;;AACzB,UAAMC,+DAAaL,KAAKI,MAAL,EAAa;AAC5BE,uBAAe,KADa;AAE5BC,gBAAQ;AAFoB,KAAb,CAAb,CAAN;AAIA,UAAMC,2DAAS,EAAT,CAAN;AALyB;AAMzBH,eAAWG,MAAX,CAAkBC,EAAlB,CAAqB,MAArB,EAA8BC,IAAD,IAAU;AAAA;AAAA;;AACnCF,eAAOG,IAAP,CAAYD,KAAKE,QAAL,EAAZ;AACH,KAFD;AAGA,UAAMC,2DAAS,EAAT,CAAN;AATyB;AAUzBR,eAAWQ,MAAX,CAAkBJ,EAAlB,CAAqB,MAArB,EAA8BC,IAAD,IAAU;AAAA;AAAA;;AACnCG,eAAOF,IAAP,CAAYD,KAAKE,QAAL,EAAZ;AACH,KAFD;AAGA,QAAIE,IAAJ;AAbyB;AAczBT,eAAWI,EAAX,CAAc,OAAd,EAAwBM,QAAD,IAAc;AAAA;AAAA;;AACjCD,eAAOC,QAAP;AACH,KAFD;AAGA;AACA;AAlByB;AAmBzB,WAAOD,SAASE,SAAhB,EAA2B;AAAA;;AACvBd,gBAAQe,KAAR,CAAc,GAAd;AACH;AArBwB;AAsBzB,WAAO,EAAEH,IAAF,EAAQD,MAAR,EAAgBL,MAAhB,EAAP;AACH;;AACDV,QAAQK,WAAR,GAAsBA,WAAtB;AACA","file":"sudoSync.js","sourcesContent":["\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// eslint-disable-next-line\nconst sudo = require('sudo');\n// eslint-disable-next-line\nconst deasync = require('deasync');\nfunction runSudoSync(params) {\n    const sudoResult = sudo(params, {\n        cachePassword: false,\n        prompt: 'Enter your password: '\n    });\n    const stderr = [];\n    sudoResult.stderr.on('data', (data) => {\n        stderr.push(data.toString());\n    });\n    const stdout = [];\n    sudoResult.stdout.on('data', (data) => {\n        stdout.push(data.toString());\n    });\n    let code;\n    sudoResult.on('close', (exitCode) => {\n        code = exitCode;\n    });\n    // Because we're running with sudo, we can't run synchronously, so synchronize by polling.\n    // eslint-disable-next-line no-unmodified-loop-condition\n    while (code === undefined) {\n        deasync.sleep(100);\n    }\n    return { code, stdout, stderr };\n}\nexports.runSudoSync = runSudoSync;\n//# sourceMappingURL=sudoSync.js.map"]}