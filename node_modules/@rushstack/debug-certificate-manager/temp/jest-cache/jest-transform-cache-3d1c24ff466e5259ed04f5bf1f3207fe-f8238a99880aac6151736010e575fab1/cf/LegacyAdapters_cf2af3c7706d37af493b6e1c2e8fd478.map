{"version":3,"sources":["LegacyAdapters.js"],"names":["Object","defineProperty","exports","value","timsort_1","require","semver","LegacyAdapters","convertCallbackToPromise","fn","arg1","arg2","arg3","arg4","Promise","resolve","reject","cb","error","result","scrubError","undefined","e","Error","errorObject","errorData","sortStable","array","compare","_useTimsort","major","process","versions","node","sort","Array","prototype","call"],"mappings":"AAAA;AACA;AACA;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,MAAMC,YAAYC,QAAQ,SAAR,CAAlB;AACA,MAAMC,SAASD,QAAQ,QAAR,CAAf;AACA;;;;AAIA,MAAME,cAAN,CAAqB;AACjB,WAAOC,wBAAP,CAAgCC,EAAhC,EAAoCC,IAApC,EAA0CC,IAA1C,EAAgDC,IAAhD,EAAsDC,IAAtD,EAA4D;AACxD,eAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,kBAAMC,KAAK,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC1B,oBAAID,KAAJ,EAAW;AACPF,2BAAOT,eAAea,UAAf,CAA0BF,KAA1B,CAAP;AACH,iBAFD,MAGK;AACDH,4BAAQI,MAAR;AACH;AACJ,aAPD;AAQA,gBAAI;AACA,oBAAIT,SAASW,SAAT,IAAsBV,SAASU,SAA/B,IAA4CT,SAASS,SAArD,IAAkER,SAASQ,SAA/E,EAA0F;AACtFZ,uBAAGC,IAAH,EAASC,IAAT,EAAeC,IAAf,EAAqBC,IAArB,EAA2BI,EAA3B;AACH,iBAFD,MAGK,IAAIP,SAASW,SAAT,IAAsBV,SAASU,SAA/B,IAA4CT,SAASS,SAAzD,EAAoE;AACrEZ,uBAAGC,IAAH,EAASC,IAAT,EAAeC,IAAf,EAAqBK,EAArB;AACH,iBAFI,MAGA,IAAIP,SAASW,SAAT,IAAsBV,SAASU,SAAnC,EAA8C;AAC/CZ,uBAAGC,IAAH,EAASC,IAAT,EAAeM,EAAf;AACH,iBAFI,MAGA,IAAIP,SAASW,SAAb,EAAwB;AACzBZ,uBAAGC,IAAH,EAASO,EAAT;AACH,iBAFI,MAGA;AACDR,uBAAGQ,EAAH;AACH;AACJ,aAhBD,CAiBA,OAAOK,CAAP,EAAU;AACNN,uBAAOM,CAAP;AACH;AACJ,SA7BM,CAAP;AA8BH;AACD;;;AAGA,WAAOF,UAAP,CAAkBF,KAAlB,EAAyB;AACrB,YAAIA,iBAAiBK,KAArB,EAA4B;AACxB,mBAAOL,KAAP;AACH,SAFD,MAGK,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAChC,mBAAO,IAAIK,KAAJ,CAAUL,KAAV,CAAP;AACH,SAFI,MAGA;AACD,kBAAMM,cAAc,IAAID,KAAJ,CAAU,oBAAV,CAApB;AACAC,wBAAYC,SAAZ,GAAwBP,KAAxB,CAFC,CAE8B;AAC/B,mBAAOM,WAAP;AACH;AACJ;AACD;;;;;;;;AAQA,WAAOE,UAAP,CAAkBC,KAAlB,EAAyBC,OAAzB,EAAkC;AAC9B,YAAIrB,eAAesB,WAAf,KAA+BR,SAAnC,EAA8C;AAC1Cd,2BAAesB,WAAf,GAA6BvB,OAAOwB,KAAP,CAAaC,QAAQC,QAAR,CAAiBC,IAA9B,IAAsC,EAAnE;AACH;AACD,YAAI1B,eAAesB,WAAnB,EAAgC;AAC5BzB,sBAAU8B,IAAV,CAAeP,KAAf,EAAsBC,OAAtB;AACH,SAFD,MAGK;AACDO,kBAAMC,SAAN,CAAgBF,IAAhB,CAAqBG,IAArB,CAA0BV,KAA1B,EAAiCC,OAAjC;AACH;AACJ;AAnEgB;AAqErBrB,eAAesB,WAAf,GAA6BR,SAA7B;AACAnB,QAAQK,cAAR,GAAyBA,cAAzB;AACA","file":"LegacyAdapters.js","sourcesContent":["\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst timsort_1 = require(\"timsort\");\nconst semver = require(\"semver\");\n/**\n * Helper functions used when interacting with APIs that do not follow modern coding practices.\n * @public\n */\nclass LegacyAdapters {\n    static convertCallbackToPromise(fn, arg1, arg2, arg3, arg4) {\n        return new Promise((resolve, reject) => {\n            const cb = (error, result) => {\n                if (error) {\n                    reject(LegacyAdapters.scrubError(error));\n                }\n                else {\n                    resolve(result);\n                }\n            };\n            try {\n                if (arg1 !== undefined && arg2 !== undefined && arg3 !== undefined && arg4 !== undefined) {\n                    fn(arg1, arg2, arg3, arg4, cb);\n                }\n                else if (arg1 !== undefined && arg2 !== undefined && arg3 !== undefined) {\n                    fn(arg1, arg2, arg3, cb);\n                }\n                else if (arg1 !== undefined && arg2 !== undefined) {\n                    fn(arg1, arg2, cb);\n                }\n                else if (arg1 !== undefined) {\n                    fn(arg1, cb);\n                }\n                else {\n                    fn(cb);\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    }\n    /**\n     * Normalizes an object into an `Error` object.\n     */\n    static scrubError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else if (typeof error === 'string') {\n            return new Error(error);\n        }\n        else {\n            const errorObject = new Error('An error occurred.');\n            errorObject.errorData = error; // eslint-disable-line @typescript-eslint/no-explicit-any\n            return errorObject;\n        }\n    }\n    /**\n     * Prior to Node 11.x, the `Array.sort()` algorithm is not guaranteed to be stable.\n     * If you need a stable sort, you can use `sortStable()` as a workaround.\n     *\n     * @remarks\n     * On NodeJS 11.x and later, this method simply calls the native `Array.sort()`.\n     * For earlier versions, it uses an implementation of Timsort, which is the same algorithm used by modern NodeJS.\n     */\n    static sortStable(array, compare) {\n        if (LegacyAdapters._useTimsort === undefined) {\n            LegacyAdapters._useTimsort = semver.major(process.versions.node) < 11;\n        }\n        if (LegacyAdapters._useTimsort) {\n            timsort_1.sort(array, compare);\n        }\n        else {\n            Array.prototype.sort.call(array, compare);\n        }\n    }\n}\nLegacyAdapters._useTimsort = undefined;\nexports.LegacyAdapters = LegacyAdapters;\n//# sourceMappingURL=LegacyAdapters.js.map"]}